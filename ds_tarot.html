<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡¨æƒ…å¡”ç½—å åœå±‹</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: #0a0a0a;
            color: #d4af37;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ç²’å­èƒŒæ™¯ */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* æ ‡é¢˜ */
        header {
            text-align: center;
            padding: 20px 0 40px;
            position: relative;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.7);
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #b59a5a;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* æ¨¡å¼åˆ‡æ¢ */
        .mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(20, 20, 20, 0.8);
            border-radius: 50px;
            padding: 5px;
            max-width: 800px;
            margin: 0 auto 40px;
            border: 1px solid #3a2d0f;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mode-toggle:hover {
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .mode-btn {
            flex: 1;
            padding: 14px 20px;
            background: transparent;
            border: none;
            color: #b59a5a;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            min-width: 0;
        }

        .mode-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .mode-btn:hover::before {
            left: 100%;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #d4af37, #a7872b);
            color: #0a0a0a;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            transform: scale(1.03);
        }

        .mode-btn:hover:not(.active) {
            color: #d4af37;
            transform: translateY(-2px);
        }

        /* å†…å®¹åŒºåŸŸ */
        .content {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* æµè§ˆæ¨¡å¼ */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: rgba(26, 22, 15, 0.9);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid #3a2d0f;
            position: relative;
            height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #d4af37;
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.4);
        }

        .card:hover::before {
            opacity: 1;
        }

        /* 45åº¦é«˜å…‰æ•ˆæœ */
        .card::after,
        .result-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
            z-index: 0;
        }

        .card:hover::after,
        .result-card:hover::after {
            opacity: 1;
            animation: shine 1.5s ease;
        }

        @keyframes shine {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        .card > *,
        .result-card > * {
            position: relative;
            z-index: 1;
        }

        .card-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #d4af37;
            text-align: left;
            margin-bottom: 10px;
        }

        .card-emoji {
            font-size: 4.5rem;
            margin: 10px 0;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            filter: drop-shadow(0 0 5px rgba(212, 175, 55, 0.5));
        }

        .card-name {
            font-size: 1rem;
            color: #b59a5a;
            margin-top: 10px;
            padding: 8px 5px;
            background: rgba(58, 45, 15, 0.7);
            border-radius: 6px;
            line-height: 1.3;
        }

        /* æŠ½ç‰Œæ¨¡å¼ */
        .drawing-options {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            margin-top: 20px;
        }

        .draw-mode-selector {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .draw-mode {
            background: rgba(26, 22, 15, 0.9);
            border: 2px solid #3a2d0f;
            border-radius: 12px;
            padding: 20px;
            width: 180px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .draw-mode::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .draw-mode:hover {
            border-color: #d4af37;
            transform: translateY(-5px) scale(1.03);
        }

        .draw-mode:hover::before {
            opacity: 1;
        }

        .draw-mode.selected {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.1);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }

        .draw-mode i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #d4af37;
        }

        .draw-mode h3 {
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        .draw-mode p {
            color: #b59a5a;
            line-height: 1.4;
            font-size: 0.9rem;
        }

        .draw-btn {
            background: linear-gradient(135deg, #d4af37, #a7872b);
            color: #0a0a0a;
            border: none;
            padding: 16px 45px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.5);
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .draw-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.7s ease;
        }

        .draw-btn:hover::before {
            left: 100%;
        }

        .draw-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 12px 25px rgba(212, 175, 55, 0.7);
        }

        .draw-btn:active {
            transform: scale(0.98);
        }

        /* æŠ½ç‰Œç»“æœ */
        .drawing-result {
            margin-top: 40px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .drawing-result.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .result-title {
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #3a2d0f;
        }

        /* ç‰Œçµç»“æœ */
        .soul-card-result {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
        }

        /* ç¿»ç‰ŒåŠ¨ç”»å®¹å™¨ - åªä½œä¸ºå‡ºç°åŠ¨ç”»ï¼Œä¸å¯å†æ¬¡ç‚¹å‡» */
        .flip-card {
            background: transparent;
            width: 300px;
            height: 400px;
            perspective: 1000px;
            margin: 0 auto 30px;
            cursor: default;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
        }

        .flip-card-front {
            background: linear-gradient(135deg, #1a160f, #3a2d0f);
            border: 3px solid #d4af37;
            color: #d4af37;
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.2);
        }

        .flip-card-back {
            background: linear-gradient(135deg, #1a160f, #3a2d0f);
            border: 3px solid #d4af37;
            color: #d4af37;
            transform: rotateY(180deg);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.2);
        }

        .card-back-pattern {
            font-size: 5rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .flip-card-emoji {
            font-size: 6rem;
            margin: 20px 0;
        }

        .flip-card-name {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .flip-card-number {
            font-size: 1.2rem;
            color: #b59a5a;
            margin-bottom: 20px;
        }

        .card-position {
            display: inline-block;
            padding: 5px 15px;
            background: rgba(0, 128, 0, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
            border: 1px solid #4CAF50;
            color: #a5d6a7;
        }

        .soul-card-description {
            color: #b59a5a;
            line-height: 1.6;
            font-size: 1.1rem;
            margin-top: 20px;
            max-width: 600px;
            text-align: center;
        }

        /* ç»“æœå¡ç‰‡é€šç”¨æ ·å¼ */
        .result-card {
            background: rgba(26, 22, 15, 0.9);
            border-radius: 12px;
            border: 2px solid #3a2d0f;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .result-card:hover {
            border-color: #d4af37;
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .result-card:hover::before {
            opacity: 1;
        }

        /* å…­èŠ’æ˜Ÿå¸ƒå±€ - ä¸¤æ’ä¸‰åˆ—ï¼Œä¸ä¸‰ç‰Œé˜µåŒç­‰å¤§å° */
        .hexagram-layout {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin: 0 auto;
            max-width: 1000px;
            padding: 20px;
        }

        .hexagram-position {
            height: 220px;
        }

        .position-label {
            background: rgba(58, 45, 15, 0.9);
            color: #d4af37;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* ä¸‰ç‰Œé˜µå¸ƒå±€ */
        .three-card-layout {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 0 auto;
            max-width: 1000px;
            padding: 20px;
            flex-wrap: wrap;
        }

        .three-card-position {
            width: 280px;
            height: 380px;
        }

        .three-card-label {
            background: rgba(58, 45, 15, 0.9);
            color: #d4af37;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 1rem;
            margin-top: 10px;
            font-weight: bold;
        }

        /* é˜¿å¡é‚£ç‰Œé˜µå¸ƒå±€ï¼ˆå››ç‰Œï¼‰ */
        .arcana-layout {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin: 0 auto;
            max-width: 800px;
            padding: 20px;
        }

        .arcana-position {
            height: 250px;
        }

        .arcana-label {
            background: rgba(58, 45, 15, 0.9);
            color: #d4af37;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 1rem;
            margin-top: 10px;
            font-weight: bold;
        }

        /* ç¿»ç‰ŒåŠ¨ç”»å®¹å™¨ - ç”¨äºç‰Œé˜µ */
        .spread-flip-card {
            background: transparent;
            width: 100%;
            height: 100%;
            perspective: 1000px;
            cursor: default;
        }

        .spread-flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            transform: rotateY(180deg);
        }

        .spread-flip-front, .spread-flip-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        .spread-flip-front {
            background: linear-gradient(135deg, #1a160f, #3a2d0f);
            color: #b59a5a;
            border: 2px solid #3a2d0f;
        }

        .spread-flip-front .question-mark {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .spread-flip-front .position-text {
            font-size: 0.9rem;
            color: #d4af37;
        }

        .spread-flip-back {
            background: rgba(26, 22, 15, 0.95);
            border: 2px solid #d4af37;
            color: #d4af37;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* ç‰Œæ”¾å¤§æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .modal-content {
            background: rgba(26, 22, 15, 0.98);
            border-radius: 20px;
            padding: 35px;
            max-width: 550px;
            width: 90%;
            border: 3px solid #d4af37;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.7);
            text-align: center;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #d4af37;
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
            z-index: 10;
        }

        .modal-close:hover {
            color: #ffd700;
            transform: scale(1.1);
        }

        .modal-emoji {
            font-size: 7rem;
            margin: 20px 0;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.7));
        }

        .modal-name {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .modal-number {
            font-size: 1.5rem;
            color: #b59a5a;
            margin-bottom: 10px;
        }

        .modal-position {
            display: inline-block;
            padding: 6px 18px;
            border-radius: 20px;
            font-size: 1rem;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .modal-position.upright {
            background: rgba(0, 128, 0, 0.3);
            border: 1px solid #4CAF50;
            color: #a5d6a7;
        }

        .modal-position.reversed {
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #f44336;
            color: #ffabab;
        }

        .modal-description {
            color: #b59a5a;
            line-height: 1.7;
            font-size: 1.2rem;
            text-align: left;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #3a2d0f;
        }

        /* é‡ç½®æŒ‰é’® */
        .reset-btn {
            background: rgba(58, 45, 15, 0.9);
            color: #d4af37;
            border: 1px solid #3a2d0f;
            padding: 14px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 40px auto 0;
        }

        .reset-btn:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: #d4af37;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }

        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 30px 0 20px;
            margin-top: 60px;
            color: #7a6a3a;
            border-top: 1px solid #3a2d0f;
            font-size: 0.9rem;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1100px) {
            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .hexagram-layout {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .arcana-layout {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .three-card-layout {
                gap: 20px;
            }
            
            .three-card-position {
                width: 250px;
                height: 350px;
            }
            
            .mode-btn {
                padding: 12px 15px;
                font-size: 1rem;
            }
            
            .draw-mode {
                width: 160px;
                padding: 15px;
            }
            
            .draw-mode h3 {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }
            
            .card {
                height: 200px;
                padding: 12px;
            }
            
            .card-emoji {
                font-size: 3.5rem;
                height: 70px;
            }
            
            .flip-card {
                width: 250px;
                height: 350px;
            }
            
            .hexagram-layout {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .arcana-layout {
                grid-template-columns: 1fr;
                max-width: 400px;
            }
            
            .three-card-layout {
                gap: 15px;
            }
            
            .three-card-position {
                width: 220px;
                height: 320px;
            }
            
            .mode-toggle {
                max-width: 500px;
            }
            
            .mode-btn {
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .draw-mode-selector {
                gap: 10px;
            }
            
            .draw-mode {
                width: 140px;
                padding: 12px;
            }
            
            .draw-mode i {
                font-size: 2rem;
            }
            
            .draw-mode h3 {
                font-size: 1rem;
            }
            
            .draw-mode p {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 600px) {
            .draw-mode-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .draw-mode {
                width: 100%;
                max-width: 250px;
            }
            
            .mode-toggle {
                flex-direction: column;
                gap: 5px;
                border-radius: 12px;
                padding: 10px;
            }
            
            .mode-btn {
                border-radius: 8px;
                padding: 12px;
            }
            
            .hexagram-layout {
                grid-template-columns: 1fr;
                max-width: 300px;
            }
            
            .arcana-layout {
                grid-template-columns: 1fr;
                max-width: 300px;
            }
            
            .three-card-layout {
                flex-direction: column;
                align-items: center;
            }
            
            .three-card-position {
                width: 100%;
                max-width: 300px;
            }
            
            .flip-card {
                width: 220px;
                height: 320px;
            }
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles-js"></div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- æ ‡é¢˜ -->
        <header>
            <h1><i class="fas fa-crystal-ball"></i> è¡¨æƒ…å¡”ç½—å åœå±‹</h1>
            <p class="subtitle">æ¢ç´¢å¡”ç½—ç‰Œçš„å¥¥ç§˜ï¼Œæµè§ˆå®Œæ•´çš„å¡”ç½—ç‰Œç»„ï¼Œæˆ–é€šè¿‡æŠ½ç‰Œè·å–ä¸ªäººæŒ‡å¼•ã€‚ç‰Œçµæ­ç¤ºä½ çš„æœ¬è´¨ï¼Œå¤šç§ç‰Œé˜µå±•å¼€å…¨é¢è§£è¯»ã€‚</p>
        </header>
        
        <!-- æ¨¡å¼åˆ‡æ¢ -->
        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="browse">
                <i class="fas fa-th"></i> æµè§ˆç‰Œç»„
            </button>
            <button class="mode-btn" data-mode="draw">
                <i class="fas fa-hand-paper"></i> æŠ½å–å¡”ç½—ç‰Œ
            </button>
        </div>
        
        <!-- æµè§ˆæ¨¡å¼ -->
        <div id="browse-mode" class="content active">
            <div class="card-grid" id="card-container">
                <!-- å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- æŠ½ç‰Œæ¨¡å¼ -->
        <div id="draw-mode" class="content">
            <div class="drawing-options">
                <div class="draw-mode-selector">
                    <div class="draw-mode selected" data-draw-type="soul">
                        <i class="fas fa-star-and-crescent"></i>
                        <h3>æŠ½å–ç‰Œçµ</h3>
                        <p>æŠ½å–ä¸€å¼ ä»£è¡¨ä½ æœ¬è´¨å’Œçµé­‚çš„å¡”ç½—ç‰Œï¼Œæ­ç¤ºä½ çš„å†…åœ¨ç‰¹è´¨ã€‚</p>
                    </div>
                    <div class="draw-mode" data-draw-type="hexagram">
                        <i class="fas fa-star-of-david"></i>
                        <h3>å…­èŠ’æ˜Ÿç‰Œé˜µ</h3>
                        <p>å…­å¼ ç‰Œå…¨é¢è§£è¯»è¿‡å»ã€ç°åœ¨å’Œæœªæ¥çš„å„ä¸ªæ–¹é¢ã€‚</p>
                    </div>
                    <div class="draw-mode" data-draw-type="three-card">
                        <i class="fas fa-stream"></i>
                        <h3>ä¸‰ç‰Œé˜µ</h3>
                        <p>è¿‡å»ã€ç°åœ¨ã€æœªæ¥ä¸‰å¼ ç‰Œï¼Œè§£è¯»æ—¶é—´çº¿ä¸Šçš„å¯ç¤ºã€‚</p>
                    </div>
                    <div class="draw-mode" data-draw-type="arcana">
                        <i class="fas fa-layer-group"></i>
                        <h3>é˜¿å¡é‚£ç‰Œé˜µ</h3>
                        <p>å››å¼ ç‰Œä»£è¡¨æƒæ–ã€åœ£æ¯ã€å®å‰‘ã€æ˜Ÿå¸å››å…ƒç´ ã€‚</p>
                    </div>
                </div>
                
                <button class="draw-btn" id="draw-button">
                    <i class="fas fa-magic"></i> å¼€å§‹æŠ½ç‰Œ
                </button>
            </div>
            
            <!-- æŠ½ç‰Œç»“æœåŒºåŸŸ -->
            <div class="drawing-result" id="drawing-result">
                <!-- ç»“æœå†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>
    
    <!-- ç‰Œæ”¾å¤§æ¨¡æ€æ¡† -->
    <div class="modal" id="card-modal">
        <div class="modal-particles" id="modal-particles"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <div class="modal-emoji" id="modal-emoji">ğŸƒ</div>
            <h2 class="modal-name" id="modal-name">æ„šè€…</h2>
            <div class="modal-number" id="modal-number">0å·ç‰Œ</div>
            <div class="modal-position" id="modal-position">æ­£ä½</div>
            <p class="modal-description" id="modal-description"></p>
        </div>
    </div>
    
    <!-- é¡µè„š -->
    <footer>
        <p>Â© 2025 é£è·ƒç–¯äººé™¢</p>
    </footer>
    
    <!-- å¼•å…¥ç²’å­æ•ˆæœåº“ -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        // ç­‰å¾…DOMå®Œå…¨åŠ è½½
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOMå·²åŠ è½½ï¼Œå¼€å§‹åˆå§‹åŒ–åº”ç”¨");
            
            // å¡”ç½—ç‰Œæ•°æ® - åŒ…å«æ­£ä½å’Œé€†ä½è§£é‡Š
            const tarotCards = [
                // å¤§é˜¿å¡é‚£ (Major Arcana)
                { 
                    number: "0", 
                    name: "æ„šè€…", 
                    emoji: "ğŸƒ", 
                    upright: "æ–°çš„å¼€å§‹ï¼Œå¤©çœŸï¼Œå†’é™©ï¼Œè‡ªç”±ç²¾ç¥ï¼Œæ— é™æ½œåŠ›ã€‚", 
                    reversed: "é²è½ï¼Œç²—å¿ƒï¼Œé£é™©ï¼Œä¸è´Ÿè´£ä»»ï¼Œåœæ»ä¸å‰ã€‚",
                    type: "major" 
                },
                { 
                    number: "I", 
                    name: "é­”æœ¯å¸ˆ", 
                    emoji: "ğŸ§™â€â™‚ï¸", 
                    upright: "åˆ›é€ ï¼ŒæŠ€èƒ½ï¼Œæ„å¿—åŠ›ï¼Œèµ„æºè¿ç”¨ï¼Œæ²Ÿé€šèƒ½åŠ›ã€‚", 
                    reversed: "æ“çºµï¼Œæ¬ºéª—ï¼Œæœªä½¿ç”¨çš„æ½œåŠ›ï¼Œæ²Ÿé€šä¸ç•…ã€‚",
                    type: "major" 
                },
                { 
                    number: "II", 
                    name: "å¥³ç¥­å¸", 
                    emoji: "ğŸ‘©â€âš–ï¸", 
                    upright: "ç›´è§‰ï¼Œæ½œæ„è¯†ï¼Œç¥ç§˜ï¼Œæ™ºæ…§ï¼Œéšè—çš„çŸ¥è¯†ã€‚", 
                    reversed: "éšè—çš„çœŸç›¸ï¼Œè‚¤æµ…ï¼Œå¿½è§†ç›´è§‰ï¼Œç§˜å¯†ã€‚",
                    type: "major" 
                },
                { 
                    number: "III", 
                    name: "å¥³çš‡", 
                    emoji: "ğŸ‘‘", 
                    upright: "ä¸°é¥¶ï¼Œå…»è‚²ï¼Œæ„Ÿæ€§ï¼Œè‡ªç„¶ï¼Œç¾ä¸½ï¼Œå¯Œè¶³ã€‚", 
                    reversed: "ä¾èµ–ï¼Œåœæ»ï¼Œè¿‡åº¦æ”¾çºµï¼Œç©ºè™šï¼Œç‰©è´¨ä¸»ä¹‰ã€‚",
                    type: "major" 
                },
                { 
                    number: "IV", 
                    name: "çš‡å¸", 
                    emoji: "ğŸ‘¨â€âš–ï¸", 
                    upright: "æƒå¨ï¼Œç»“æ„ï¼Œæ§åˆ¶ï¼Œç¨³å®šï¼Œé¢†å¯¼åŠ›ï¼Œç§©åºã€‚", 
                    reversed: "æš´æ”¿ï¼ŒåƒµåŒ–ï¼Œæ§åˆ¶æ¬²ï¼Œç¼ºä¹çºªå¾‹ã€‚",
                    type: "major" 
                },
                { 
                    number: "V", 
                    name: "æ•™çš‡", 
                    emoji: "ğŸ™", 
                    upright: "ä¿¡ä»°ï¼Œä¼ ç»Ÿï¼Œç²¾ç¥æŒ‡å¯¼ï¼Œé“å¾·ï¼Œå›¢ä½“è®¤åŒã€‚", 
                    reversed: "ä¼ ç»ŸæŸç¼šï¼Œä¸ªäººä¿¡ä»°ï¼Œæ•™æ¡ï¼Œåå›ã€‚",
                    type: "major" 
                },
                { 
                    number: "VI", 
                    name: "æ‹äºº", 
                    emoji: "ğŸ’‘", 
                    upright: "çˆ±æƒ…ï¼Œé€‰æ‹©ï¼Œä»·å€¼è§‚ï¼Œå…³ç³»ï¼Œå’Œè°ï¼Œç»“åˆã€‚", 
                    reversed: "ä¸å’Œè°ï¼Œä»·å€¼è§‚å†²çªï¼Œé”™è¯¯é€‰æ‹©ï¼Œåˆ†ç¦»ã€‚",
                    type: "major" 
                },
                { 
                    number: "VII", 
                    name: "æˆ˜è½¦", 
                    emoji: "ğŸ›¡ï¸", 
                    upright: "æ„å¿—åŠ›ï¼Œèƒœåˆ©ï¼Œè‡ªå¾‹ï¼Œå‰è¿›ï¼Œæ§åˆ¶å¯¹ç«‹åŠ›é‡ã€‚", 
                    reversed: "ç¼ºä¹æ–¹å‘ï¼Œä¾µç•¥ï¼Œå¤±æ§ï¼Œéšœç¢ã€‚",
                    type: "major" 
                },
                { 
                    number: "VIII", 
                    name: "åŠ›é‡", 
                    emoji: "ğŸ’ª", 
                    upright: "å‹‡æ°”ï¼Œè€å¿ƒï¼Œå†…åœ¨åŠ›é‡ï¼Œä»¥æŸ”å…‹åˆšï¼Œä¿¡å¿ƒã€‚", 
                    reversed: "è½¯å¼±ï¼Œè‡ªæˆ‘æ€€ç–‘ï¼Œæ»¥ç”¨åŠ›é‡ï¼Œææƒ§ã€‚",
                    type: "major" 
                },
                { 
                    number: "IX", 
                    name: "éšå£«", 
                    emoji: "ğŸ§“", 
                    upright: "å†…çœï¼Œå­¤ç‹¬ï¼Œå¯»æ±‚çœŸç†ï¼Œæ™ºæ…§ï¼Œç²¾ç¥æŒ‡å¼•ã€‚", 
                    reversed: "å­¤ç«‹ï¼Œå­¤ç‹¬ï¼Œæ‹’ç»å¸®åŠ©ï¼Œè¿·å¤±æ–¹å‘ã€‚",
                    type: "major" 
                },
                { 
                    number: "X", 
                    name: "å‘½è¿ä¹‹è½®", 
                    emoji: "ğŸ”„", 
                    upright: "å‘½è¿ï¼Œè½¬æŠ˜ç‚¹ï¼Œæœºé‡ï¼Œå¾ªç¯ï¼Œä¸å¯æ§çš„å˜åŒ–ã€‚", 
                    reversed: "åè¿æ°”ï¼ŒæŠµæŠ—å˜åŒ–ï¼Œå»¶è¿Ÿï¼Œå¤–éƒ¨æ§åˆ¶ã€‚",
                    type: "major" 
                },
                { 
                    number: "XI", 
                    name: "æ­£ä¹‰", 
                    emoji: "âš–ï¸", 
                    upright: "å…¬å¹³ï¼ŒçœŸç†ï¼Œå› æœï¼Œå¹³è¡¡ï¼Œæ³•å¾‹ï¼Œå†³ç­–ã€‚", 
                    reversed: "ä¸å…¬æ­£ï¼Œåè§ï¼Œä¸è´Ÿè´£ï¼Œæ³•å¾‹é—®é¢˜ã€‚",
                    type: "major" 
                },
                { 
                    number: "XII", 
                    name: "å€’åŠäºº", 
                    emoji: "ğŸ™ƒ", 
                    upright: "ç‰ºç‰²ï¼Œç­‰å¾…ï¼Œæ–°è§†è§’ï¼Œé¡ºä»ï¼Œç²¾ç¥æˆé•¿ã€‚", 
                    reversed: "æ‹–å»¶ï¼ŒæŠ—æ‹’ç‰ºç‰²ï¼Œè‡ªç§ï¼Œåœæ»ã€‚",
                    type: "major" 
                },
                { 
                    number: "XIII", 
                    name: "æ­»ç¥", 
                    emoji: "ğŸ’€", 
                    upright: "ç»“æŸï¼Œè½¬å˜ï¼Œæ–°ç”Ÿï¼Œé‡Šæ”¾ï¼Œä¸å¯é¿å…çš„å˜åŒ–ã€‚", 
                    reversed: "æŠ—æ‹’å˜åŒ–ï¼Œåœæ»ï¼Œç¼“æ…¢å˜åŒ–ï¼Œææƒ§ç»“æŸã€‚",
                    type: "major" 
                },
                { 
                    number: "XIV", 
                    name: "èŠ‚åˆ¶", 
                    emoji: "âš—ï¸", 
                    upright: "å¹³è¡¡ï¼Œè°ƒå’Œï¼Œè€å¿ƒï¼Œé€‚åº¦ï¼Œå’Œè°ï¼Œèåˆå¯¹ç«‹ã€‚", 
                    reversed: "ä¸å¹³è¡¡ï¼Œæç«¯ï¼Œç¼ºä¹è€å¿ƒï¼Œä¸å’Œè°ã€‚",
                    type: "major" 
                },
                { 
                    number: "XV", 
                    name: "æ¶é­”", 
                    emoji: "ğŸ‘¿", 
                    upright: "æŸç¼šï¼Œç‰©è´¨ä¸»ä¹‰ï¼Œæ— çŸ¥ï¼Œæ¬²æœ›ï¼Œæ¶ˆææ¨¡å¼ã€‚", 
                    reversed: "é‡Šæ”¾ï¼Œå…‹æœæŸç¼šï¼Œç²¾ç¥è§‰é†’ï¼Œæ‘†è„±ç‰©è´¨ã€‚",
                    type: "major" 
                },
                { 
                    number: "XVI", 
                    name: "é«˜å¡”", 
                    emoji: "âš¡", 
                    upright: "çªç„¶å˜åŒ–ï¼Œå¯ç¤ºï¼Œå´©å¡Œï¼Œé‡Šæ”¾ï¼Œè§‰é†’ã€‚", 
                    reversed: "å®³æ€•å˜åŒ–ï¼Œç¾éš¾é¿å…ï¼Œå»¶è¿Ÿå´©æºƒã€‚",
                    type: "major" 
                },
                { 
                    number: "XVII", 
                    name: "æ˜Ÿæ˜Ÿ", 
                    emoji: "â­", 
                    upright: "å¸Œæœ›ï¼Œçµæ„Ÿï¼Œå®é™ï¼Œä¿¡å¿ƒï¼Œç²¾ç¥æŒ‡å¼•ã€‚", 
                    reversed: "ç»æœ›ï¼Œå¤±æœ›ï¼Œç¼ºä¹ä¿¡å¿ƒï¼Œè¿·å¤±æ–¹å‘ã€‚",
                    type: "major" 
                },
                { 
                    number: "XVIII", 
                    name: "æœˆäº®", 
                    emoji: "ğŸŒ™", 
                    upright: "æ½œæ„è¯†ï¼Œææƒ§ï¼Œå¹»è§‰ï¼Œä¸ç¡®å®šæ€§ï¼Œéšè—çš„æ•Œäººã€‚", 
                    reversed: "é‡Šæ”¾ææƒ§ï¼ŒçœŸç›¸æ˜¾ç°ï¼Œè¾ƒå°‘æ¬ºéª—ï¼Œæ¸…æ™°ã€‚",
                    type: "major" 
                },
                { 
                    number: "XIX", 
                    name: "å¤ªé˜³", 
                    emoji: "â˜€ï¸", 
                    upright: "å¿«ä¹ï¼ŒæˆåŠŸï¼Œæ´»åŠ›ï¼Œè‡ªä¿¡ï¼Œæ¸…æ™°ï¼Œç§¯æèƒ½é‡ã€‚", 
                    reversed: "æš‚æ—¶æŒ«æŠ˜ï¼Œè¿‡åº¦è‡ªä¿¡ï¼ŒæˆåŠŸå»¶è¿Ÿï¼Œä¹Œäº‘ã€‚",
                    type: "major" 
                },
                { 
                    number: "XX", 
                    name: "å®¡åˆ¤", 
                    emoji: "ğŸ“¯", 
                    upright: "é‡ç”Ÿï¼Œå†…çœï¼Œå¬å”¤ï¼Œå®½æ•ï¼Œé‡å¤§å†³å®šã€‚", 
                    reversed: "è‡ªæˆ‘æ€€ç–‘ï¼Œæ‹’ç»å¬å”¤ï¼Œå®³æ€•æ”¹å˜ï¼Œå»¶è¿Ÿã€‚",
                    type: "major" 
                },
                { 
                    number: "XXI", 
                    name: "ä¸–ç•Œ", 
                    emoji: "ğŸŒ", 
                    upright: "å®Œæˆï¼Œæˆå°±ï¼Œæ—…è¡Œï¼Œæ•´åˆï¼ŒæˆåŠŸï¼Œåœ†æ»¡ã€‚", 
                    reversed: "æœªå®Œæˆï¼Œç¼ºä¹æˆå°±ï¼Œå»¶è¿Ÿï¼Œéœ€è¦æ›´å¤šåŠªåŠ›ã€‚",
                    type: "major" 
                },
                // å°é˜¿å¡é‚£ - æƒæ–
                { 
                    number: "æƒæ–1", 
                    name: "æƒæ–ç‹ç‰Œ", 
                    emoji: "ğŸªµ", 
                    upright: "æ–°è®¡åˆ’ï¼Œèƒ½é‡ï¼Œåˆ›é€ åŠ›ï¼Œçµæ„Ÿï¼Œæ–°äº‹ä¸šå¼€å§‹ã€‚", 
                    reversed: "å»¶è¿Ÿå¼€å§‹ï¼Œç¼ºä¹èƒ½é‡ï¼Œæœªå®ç°çš„æ½œåŠ›ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–2", 
                    name: "æƒæ–äºŒ", 
                    emoji: "ğŸ—ºï¸", 
                    upright: "è§„åˆ’ï¼Œå†³ç­–ï¼Œå±•æœ›æœªæ¥ï¼Œæ½œåœ¨æˆé•¿ï¼Œæƒè¡¡é€‰æ‹©ã€‚", 
                    reversed: "ä¸è‰¯è§„åˆ’ï¼Œææƒ§å†³ç­–ï¼Œç¼ºä¹è¿œè§ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–3", 
                    name: "æƒæ–ä¸‰", 
                    emoji: "â›µ", 
                    upright: "è¿œè§ï¼Œæ‰©å¼ ï¼Œåˆä½œï¼Œåˆæ­¥æˆåŠŸï¼Œç­‰å¾…æˆæœã€‚", 
                    reversed: "å»¶è¿Ÿï¼ŒæŒ«æŠ˜ï¼Œç¼ºä¹è¿œè§ï¼Œåˆä½œå›°éš¾ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–4", 
                    name: "æƒæ–å››", 
                    emoji: "ğŸ ", 
                    upright: "ç¨³å®šï¼Œåº†ç¥ï¼Œå’Œè°ï¼Œå®¶ï¼Œå®‰å…¨æ„Ÿï¼Œé‡Œç¨‹ç¢‘ã€‚", 
                    reversed: "ä¸ç¨³å®šï¼Œç¼ºä¹åº†ç¥ï¼Œå†²çªï¼Œå®¶åº­é—®é¢˜ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–5", 
                    name: "æƒæ–äº”", 
                    emoji: "âš”ï¸", 
                    upright: "å†²çªï¼Œç«äº‰ï¼Œè¾©è®ºï¼ŒæŒ‘æˆ˜ï¼Œä¸åŒçš„è§‚ç‚¹ã€‚", 
                    reversed: "é¿å…å†²çªï¼Œè§£å†³äº‰ç«¯ï¼Œå†…åœ¨å†²çªã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–6", 
                    name: "æƒæ–å…­", 
                    emoji: "ğŸ–ï¸", 
                    upright: "èƒœåˆ©ï¼Œè¿›æ­¥ï¼Œè®¤å¯ï¼Œè‡ªä¿¡ï¼Œå…¬å¼€å±•ç¤ºã€‚", 
                    reversed: "å¤±è´¥ï¼Œç¼ºä¹è®¤å¯ï¼Œè‡ªè´Ÿï¼Œå…¬ä¼—ä¸‘é—»ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æƒæ–7", 
                    name: "æƒæ–ä¸ƒ", 
                    emoji: "ğŸ›¡ï¸", 
                    upright: "å‹‡æ°”ï¼ŒåšæŒï¼ŒæŒ‘æˆ˜ï¼Œé˜²å¾¡ï¼Œæå«ç«‹åœºã€‚", 
                    reversed: "æ”¾å¼ƒï¼Œä¸çŸ¥æ‰€æªï¼Œé˜²å¾¡å´©æºƒã€‚",
                    type: "minor" 
                },
                // å°é˜¿å¡é‚£ - åœ£æ¯
                { 
                    number: "åœ£æ¯1", 
                    name: "åœ£æ¯ç‹ç‰Œ", 
                    emoji: "ğŸ†", 
                    upright: "æ–°æ„Ÿæƒ…ï¼Œç›´è§‰ï¼Œæƒ…æ„Ÿå¼€å§‹ï¼Œæ•å¼€å†…å¿ƒï¼Œçˆ±ã€‚", 
                    reversed: "æƒ…æ„Ÿç©ºè™šï¼Œæœªå®ç°çš„æ„Ÿæƒ…ï¼Œæ‹’ç»çˆ±ã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯2", 
                    name: "åœ£æ¯äºŒ", 
                    emoji: "ğŸ¤", 
                    upright: "ä¼™ä¼´å…³ç³»ï¼Œå’Œè°ï¼Œç›¸äº’å¸å¼•ï¼Œç»“åˆï¼Œå¹³ç­‰å…³ç³»ã€‚", 
                    reversed: "ä¸å’Œè°ï¼Œä¸å¹³è¡¡çš„å…³ç³»ï¼Œåˆ†ç¦»ã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯3", 
                    name: "åœ£æ¯ä¸‰", 
                    emoji: "ğŸ‰", 
                    upright: "åº†ç¥ï¼Œå‹è°Šï¼Œåˆ›é€ åŠ›ï¼Œåˆä½œï¼Œç¤¾äº¤æ´»åŠ¨ã€‚", 
                    reversed: "è¿‡åº¦æ”¾çºµï¼Œèšä¼šé—®é¢˜ï¼Œç¤¾äº¤å†²çªã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯4", 
                    name: "åœ£æ¯å››", 
                    emoji: "ğŸ¤”", 
                    upright: "æ²‰æ€ï¼Œä¸æ»¡ï¼Œé€€ç¼©ï¼Œé‡æ–°è¯„ä¼°ï¼Œé”™è¿‡æœºä¼šã€‚", 
                    reversed: "æ–°çš„æœºä¼šï¼Œæ¥å—æœºä¼šï¼Œèµ°å‡ºèˆ’é€‚åŒºã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯5", 
                    name: "åœ£æ¯äº”", 
                    emoji: "ğŸ˜”", 
                    upright: "å¤±è½ï¼Œæ‚²ä¼¤ï¼Œå¤±æœ›ï¼Œå…³æ³¨è´Ÿé¢ï¼Œéœ€è¦æ¥çº³ã€‚", 
                    reversed: "æ¥å—ï¼Œå¯»æ‰¾å¸Œæœ›ï¼Œä»æŸå¤±ä¸­æ¢å¤ã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯6", 
                    name: "åœ£æ¯å…­", 
                    emoji: "ğŸ¡", 
                    upright: "å›å¿†ï¼Œç«¥å¹´ï¼Œçº¯çœŸï¼Œé¦ˆèµ ï¼Œæ€€æ—§ï¼Œå®‰å…¨ã€‚", 
                    reversed: "æ´»åœ¨ç°åœ¨ï¼Œæ”¾ä¸‹è¿‡å»ï¼Œç‹¬ç«‹æˆé•¿ã€‚",
                    type: "minor" 
                },
                { 
                    number: "åœ£æ¯7", 
                    name: "åœ£æ¯ä¸ƒ", 
                    emoji: "ğŸŒˆ", 
                    upright: "é€‰æ‹©ï¼Œå¹»æƒ³ï¼Œç™½æ—¥æ¢¦ï¼Œå¤šç§å¯èƒ½ï¼Œéœ€è¦å†³å®šã€‚", 
                    reversed: "ç¼ºä¹é€‰æ‹©ï¼Œæ˜ç¡®å†³å®šï¼Œç°å®æ£€éªŒã€‚",
                    type: "minor" 
                },
                // å°é˜¿å¡é‚£ - å®å‰‘
                { 
                    number: "å®å‰‘1", 
                    name: "å®å‰‘ç‹ç‰Œ", 
                    emoji: "âš”ï¸", 
                    upright: "çªç ´ï¼Œæ¸…æ™°ï¼ŒçœŸç†ï¼Œæ–°æƒ³æ³•ï¼Œæ™ºåŠ›å¼€å§‹ã€‚", 
                    reversed: "æ··ä¹±ï¼Œæ²Ÿé€šä¸ç•…ï¼Œåˆ†æç˜«ç—ªã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘2", 
                    name: "å®å‰‘äºŒ", 
                    emoji: "ğŸ‘ï¸", 
                    upright: "åƒµå±€ï¼Œé€ƒé¿ï¼Œè‰°éš¾é€‰æ‹©ï¼Œå¹³è¡¡ï¼Œéœ€è¦å†³å®šã€‚", 
                    reversed: "åšå‡ºå†³å®šï¼Œé‡Šæ”¾ä¿¡æ¯ï¼Œé¢å¯¹çœŸç›¸ã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘3", 
                    name: "å®å‰‘ä¸‰", 
                    emoji: "ğŸ’”", 
                    upright: "ä¼¤å¿ƒï¼Œç—›è‹¦ï¼Œåˆ†ç¦»ï¼Œå¤±æœ›ï¼Œæƒ…æ„Ÿä¼¤å®³ã€‚", 
                    reversed: "æ¢å¤ï¼Œæ„ˆåˆï¼Œä»ç—›è‹¦ä¸­å­¦ä¹ ã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘4", 
                    name: "å®å‰‘å››", 
                    emoji: "ğŸ˜´", 
                    upright: "ä¼‘æ¯ï¼Œæ¢å¤ï¼Œæ²‰æ€ï¼Œæš‚åœï¼Œå‡†å¤‡ç»§ç»­å‰è¿›ã€‚", 
                    reversed: "ä¼‘æ¯ç»“æŸï¼Œé‡æ–°å‚ä¸ï¼Œæ¢å¤æ´»åŠ›ã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘5", 
                    name: "å®å‰‘äº”", 
                    emoji: "ğŸ˜", 
                    upright: "å†²çªï¼Œäº‰è®ºï¼Œä¸æƒœä»£ä»·å–èƒœï¼ŒçŸ­æœŸèƒœåˆ©ã€‚", 
                    reversed: "è§£å†³å†²çªï¼Œå¦¥åï¼Œä»é”™è¯¯ä¸­å­¦ä¹ ã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘6", 
                    name: "å®å‰‘å…­", 
                    emoji: "ğŸ›¶", 
                    upright: "è¿‡æ¸¡ï¼Œç–—æ„ˆï¼Œç¦»å¼€å›°éš¾ï¼Œæœæ›´å¥½æ–¹å‘å‰è¿›ã€‚", 
                    reversed: "åœæ»ï¼Œæ— æ³•å‰è¿›ï¼Œæ‹’ç»å¸®åŠ©ã€‚",
                    type: "minor" 
                },
                { 
                    number: "å®å‰‘7", 
                    name: "å®å‰‘ä¸ƒ", 
                    emoji: "ğŸ¦¹", 
                    upright: "æ¬ºéª—ï¼Œç­–ç•¥ï¼Œå­¤å†›å¥‹æˆ˜ï¼Œç§˜å¯†è®¡åˆ’ï¼Œä¸è¯šå®ã€‚", 
                    reversed: "çœŸç›¸æš´éœ²ï¼Œè¯šå®ï¼Œæ”¾å¼ƒæ¬ºéª—ç­–ç•¥ã€‚",
                    type: "minor" 
                },
                // å°é˜¿å¡é‚£ - æ˜Ÿå¸
                { 
                    number: "æ˜Ÿå¸1", 
                    name: "æ˜Ÿå¸ç‹ç‰Œ", 
                    emoji: "ğŸ’°", 
                    upright: "æ–°æœºä¼šï¼Œç¹è£ï¼Œå®‰å…¨æ„Ÿï¼Œç‰©è´¨å¼€å§‹ï¼ŒæŠ•èµ„ã€‚", 
                    reversed: "é”™å¤±æœºä¼šï¼Œç¼ºä¹è§„åˆ’ï¼Œè´¢åŠ¡æŸå¤±ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸2", 
                    name: "æ˜Ÿå¸äºŒ", 
                    emoji: "ğŸª", 
                    upright: "å¹³è¡¡èµ„æºï¼Œé€‚åº”å˜åŒ–ï¼Œå¨±ä¹ï¼Œå¤šä»»åŠ¡å¤„ç†ã€‚", 
                    reversed: "ä¸å¹³è¡¡ï¼Œè´¢åŠ¡ç®¡ç†ä¸å–„ï¼Œè¿‡åº¦å·¥ä½œã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸3", 
                    name: "æ˜Ÿå¸ä¸‰", 
                    emoji: "ğŸ—ï¸", 
                    upright: "åˆä½œï¼Œå­¦ä¹ ï¼ŒæŠ€èƒ½å‘å±•ï¼Œå›¢é˜Ÿåˆä½œï¼ŒæŒæ¡ã€‚", 
                    reversed: "ç¼ºä¹åˆä½œï¼ŒæŠ€èƒ½ä¸è¶³ï¼Œå­¤ç«‹å·¥ä½œã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸4", 
                    name: "æ˜Ÿå¸å››", 
                    emoji: "ğŸ’", 
                    upright: "ä¿å®ˆï¼Œæ§åˆ¶ï¼Œå®‰å…¨ï¼Œåå•¬ï¼Œå›ºæ‰§ï¼Œç¨³å®šã€‚", 
                    reversed: "æ…·æ…¨ï¼Œæ”¾å¼€æ§åˆ¶ï¼Œè´¢åŠ¡è‡ªç”±ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸5", 
                    name: "æ˜Ÿå¸äº”", 
                    emoji: "ğŸ¥¶", 
                    upright: "å›°éš¾ï¼Œè´«å›°ï¼Œå­¤ç‹¬ï¼Œè‰°éš¾æ—¶æœŸï¼Œéœ€è¦æ”¯æŒã€‚", 
                    reversed: "æ¢å¤ï¼Œç¤¾åŒºæ”¯æŒï¼Œå…‹æœå›°éš¾ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸6", 
                    name: "æ˜Ÿå¸å…­", 
                    emoji: "ğŸ¤²", 
                    upright: "æ…·æ…¨ï¼Œæ…ˆå–„ï¼Œç»™äºˆä¸æ¥å—ï¼Œå…¬å¹³ï¼Œåˆ†äº«è´¢å¯Œã€‚", 
                    reversed: "è‡ªç§ï¼Œä¸å¹³è¡¡çš„æƒåŠ›ï¼Œè´ªå©ªï¼Œå€ºåŠ¡ã€‚",
                    type: "minor" 
                },
                { 
                    number: "æ˜Ÿå¸7", 
                    name: "æ˜Ÿå¸ä¸ƒ", 
                    emoji: "ğŸŒ±", 
                    upright: "è¯„ä¼°ï¼Œè€å¿ƒï¼ŒæŠ•èµ„å›æŠ¥ï¼Œé•¿æœŸè®¡åˆ’ï¼Œç­‰å¾…æ”¶è·ã€‚", 
                    reversed: "ç¼ºä¹æˆæœï¼Œä¸è€çƒ¦ï¼ŒæŠ•èµ„å¤±è´¥ã€‚",
                    type: "minor" 
                }
            ];
            
            // å…­èŠ’æ˜Ÿä½ç½®è¯´æ˜
            const hexagramPositions = [
                { id: 1, label: "è¿‡å»çš„å½±å“", description: "ä»£è¡¨è¿‡å»çš„äº‹ä»¶æˆ–çŠ¶å†µå¯¹å½“å‰é—®é¢˜çš„å½±å“" },
                { id: 2, label: "ç°åœ¨çš„æŒ‘æˆ˜", description: "ä»£è¡¨å½“å‰é¢ä¸´çš„æŒ‘æˆ˜æˆ–éšœç¢" },
                { id: 3, label: "æœªæ¥çš„å‘å±•", description: "ä»£è¡¨æœªæ¥å¯èƒ½çš„å‘å±•æ–¹å‘æˆ–ç»“æœ" },
                { id: 4, label: "æ½œåœ¨çš„åŸå› ", description: "ä»£è¡¨é—®é¢˜çš„æ½œåœ¨åŸå› æˆ–æ ¹æœ¬å› ç´ " },
                { id: 5, label: "å¤–ç•Œçš„å½±å“", description: "ä»£è¡¨å¤–éƒ¨ç¯å¢ƒæˆ–ä»–äººå¯¹é—®é¢˜çš„å½±å“" },
                { id: 6, label: "æœ€ç»ˆçš„ç»“æœ", description: "ä»£è¡¨æœ€ç»ˆçš„ç»“æœæˆ–é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ" }
            ];
            
            // ä¸‰ç‰Œé˜µä½ç½®è¯´æ˜
            const threeCardPositions = [
                { id: 1, label: "è¿‡å»", description: "ä»£è¡¨è¿‡å»çš„äº‹ä»¶æˆ–çŠ¶å†µå¯¹å½“å‰çš„å½±å“" },
                { id: 2, label: "ç°åœ¨", description: "ä»£è¡¨å½“å‰çš„çŠ¶å†µå’ŒæŒ‘æˆ˜" },
                { id: 3, label: "æœªæ¥", description: "ä»£è¡¨æœªæ¥çš„å¯èƒ½å‘å±•å’Œç»“æœ" }
            ];
            
            // é˜¿å¡é‚£ç‰Œé˜µä½ç½®è¯´æ˜
            const arcanaPositions = [
                { id: 1, label: "æƒæ–", description: "ä»£è¡¨è¡ŒåŠ¨ã€èƒ½é‡ã€åˆ›é€ åŠ›å’Œæ¿€æƒ…" },
                { id: 2, label: "åœ£æ¯", description: "ä»£è¡¨æƒ…æ„Ÿã€ç›´è§‰ã€å…³ç³»å’Œå†…å¿ƒä¸–ç•Œ" },
                { id: 3, label: "å®å‰‘", description: "ä»£è¡¨æ€æƒ³ã€å†³ç­–ã€å†²çªå’ŒçœŸç†" },
                { id: 4, label: "æ˜Ÿå¸", description: "ä»£è¡¨ç‰©è´¨ã€è´¢å¯Œã€å®‰å…¨å’Œå®é™…äº‹åŠ¡" }
            ];
            
            // DOMå…ƒç´ 
            const modeButtons = document.querySelectorAll('.mode-btn');
            const contents = document.querySelectorAll('.content');
            const cardContainer = document.getElementById('card-container');
            const drawModes = document.querySelectorAll('.draw-mode');
            const drawButton = document.getElementById('draw-button');
            const drawingResult = document.getElementById('drawing-result');
            const cardModal = document.getElementById('card-modal');
            const modalClose = document.getElementById('modal-close');
            const modalParticles = document.getElementById('modal-particles');
            
            // å½“å‰çŠ¶æ€
            let currentMode = 'browse';
            let currentDrawType = 'soul';
            let drawnCards = [];
            let hexagramCards = [];
            let threeCardSpread = [];
            let arcanaSpread = [];
            let modalParticlesInstance = null;
            
            // åˆå§‹åŒ–
            function init() {
                console.log("åˆå§‹åŒ–åº”ç”¨");
                
                // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
                initParticles();
                
                // ç”Ÿæˆå¡ç‰‡
                renderCards();
                
                // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
                setupEventListeners();
                
                console.log("åº”ç”¨åˆå§‹åŒ–å®Œæˆ");
            }
            
            // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
            function initParticles() {
                console.log("åˆå§‹åŒ–ç²’å­èƒŒæ™¯");
                if (typeof particlesJS !== 'undefined') {
                    particlesJS('particles-js', {
                        particles: {
                            number: { value: 80, density: { enable: true, value_area: 800 } },
                            color: { value: "#d4af37" },
                            shape: { type: "circle" },
                            opacity: { value: 0.5, random: true },
                            size: { value: 3, random: true },
                            line_linked: {
                                enable: true,
                                distance: 150,
                                color: "#b59a5a",
                                opacity: 0.2,
                                width: 1
                            },
                            move: {
                                enable: true,
                                speed: 1,
                                direction: "none",
                                random: true,
                                straight: false,
                                out_mode: "out",
                                bounce: false
                            }
                        },
                        interactivity: {
                            detect_on: "canvas",
                            events: {
                                onhover: { enable: true, mode: "repulse" },
                                onclick: { enable: true, mode: "push" }
                            }
                        },
                        retina_detect: true
                    });
                } else {
                    console.error("ç²’å­æ•ˆæœåº“æœªåŠ è½½");
                }
            }
            
            // åˆå§‹åŒ–æ¨¡æ€æ¡†ç²’å­èƒŒæ™¯
            function initModalParticles() {
                if (typeof particlesJS !== 'undefined' && modalParticles) {
                    // é”€æ¯ä¹‹å‰çš„ç²’å­å®ä¾‹
                    if (modalParticlesInstance) {
                        modalParticlesInstance.destroy();
                    }
                    
                    modalParticlesInstance = particlesJS('modal-particles', {
                        particles: {
                            number: { value: 50, density: { enable: true, value_area: 800 } },
                            color: { value: "#d4af37" },
                            shape: { type: "circle" },
                            opacity: { value: 0.8, random: true },
                            size: { value: 2, random: true },
                            line_linked: {
                                enable: true,
                                distance: 100,
                                color: "#ffd700",
                                opacity: 0.4,
                                width: 1
                            },
                            move: {
                                enable: true,
                                speed: 2,
                                direction: "none",
                                random: true,
                                straight: false,
                                out_mode: "out",
                                bounce: false
                            }
                        },
                        interactivity: {
                            detect_on: "canvas",
                            events: {
                                onhover: { enable: true, mode: "repulse" },
                                onclick: { enable: true, mode: "push" }
                            }
                        },
                        retina_detect: true
                    });
                }
            }
            
            // æ¸²æŸ“æ‰€æœ‰å¡ç‰‡
            function renderCards() {
                console.log("æ¸²æŸ“å¡ç‰‡ï¼Œæ€»å…±", tarotCards.length, "å¼ ç‰Œ");
                if (!cardContainer) {
                    console.error("å¡ç‰‡å®¹å™¨æœªæ‰¾åˆ°");
                    return;
                }
                
                cardContainer.innerHTML = '';
                
                tarotCards.forEach((card, index) => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'card';
                    cardElement.dataset.index = index;
                    
                    cardElement.innerHTML = `
                        <div class="card-number">${card.number}å·ç‰Œ</div>
                        <div class="card-emoji">${card.emoji}</div>
                        <div class="card-name">${card.name}</div>
                    `;
                    
                    cardContainer.appendChild(cardElement);
                });
                
                console.log("å¡ç‰‡æ¸²æŸ“å®Œæˆ");
            }
            
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            function setupEventListeners() {
                console.log("è®¾ç½®äº‹ä»¶ç›‘å¬å™¨");
                
                // æ¨¡å¼åˆ‡æ¢
                modeButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const mode = this.dataset.mode;
                        console.log("åˆ‡æ¢æ¨¡å¼åˆ°:", mode);
                        switchMode(mode);
                    });
                });
                
                // æŠ½ç‰Œæ¨¡å¼é€‰æ‹©
                drawModes.forEach(mode => {
                    mode.addEventListener('click', function() {
                        console.log("é€‰æ‹©æŠ½ç‰Œæ¨¡å¼:", this.dataset.drawType);
                        drawModes.forEach(m => m.classList.remove('selected'));
                        this.classList.add('selected');
                        currentDrawType = this.dataset.drawType;
                    });
                });
                
                // æŠ½ç‰ŒæŒ‰é’®
                if (drawButton) {
                    drawButton.addEventListener('click', drawCards);
                } else {
                    console.error("æŠ½ç‰ŒæŒ‰é’®æœªæ‰¾åˆ°");
                }
                
                // å¡ç‰‡ç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
                if (cardContainer) {
                    cardContainer.addEventListener('click', (e) => {
                        const cardElement = e.target.closest('.card');
                        if (cardElement) {
                            const index = parseInt(cardElement.dataset.index);
                            console.log("ç‚¹å‡»å¡ç‰‡ï¼Œç´¢å¼•:", index);
                            showCardModal(index, 'upright');
                        }
                    });
                }
                
                // ç»“æœå¡ç‰‡ç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
                drawingResult.addEventListener('click', (e) => {
                    // æ£€æŸ¥æ˜¯å¦æ˜¯ç»“æœå¡ç‰‡
                    let cardElement = e.target.closest('.result-card');
                    if (!cardElement) {
                        cardElement = e.target.closest('[data-index]');
                    }
                    
                    if (cardElement && cardElement.dataset.index) {
                        const index = parseInt(cardElement.dataset.index);
                        const position = cardElement.dataset.position || 'upright';
                        console.log("ç‚¹å‡»ç»“æœå¡ç‰‡ï¼Œç´¢å¼•:", index, "ä½ç½®:", position);
                        showCardModal(index, position);
                    }
                });
                
                // æ¨¡æ€æ¡†å…³é—­
                if (modalClose) {
                    modalClose.addEventListener('click', () => {
                        console.log("å…³é—­æ¨¡æ€æ¡†");
                        cardModal.classList.remove('active');
                    });
                }
                
                // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
                cardModal.addEventListener('click', (e) => {
                    if (e.target === cardModal) {
                        console.log("ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­");
                        cardModal.classList.remove('active');
                    }
                });
                
                // é‡ç½®æŒ‰é’®äº‹ä»¶å§”æ‰˜
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('reset-btn') || e.target.closest('.reset-btn')) {
                        console.log("é‡ç½®æŠ½ç‰Œ");
                        resetDrawing();
                    }
                });
                
                console.log("äº‹ä»¶ç›‘å¬å™¨è®¾ç½®å®Œæˆ");
            }
            
            // åˆ‡æ¢æ¨¡å¼
            function switchMode(mode) {
                console.log("æ­£åœ¨åˆ‡æ¢æ¨¡å¼:", mode);
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                modeButtons.forEach(button => {
                    if (button.dataset.mode === mode) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
                
                // æ›´æ–°å†…å®¹æ˜¾ç¤º
                contents.forEach(content => {
                    if (content.id === `${mode}-mode`) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });
                
                currentMode = mode;
                
                // å¦‚æœåˆ‡æ¢åˆ°æŠ½ç‰Œæ¨¡å¼ï¼Œé‡ç½®ç»“æœåŒºåŸŸ
                if (mode === 'draw') {
                    console.log("åˆ‡æ¢åˆ°æŠ½ç‰Œæ¨¡å¼ï¼Œé‡ç½®ç»“æœåŒºåŸŸ");
                    drawingResult.classList.remove('active');
                    drawingResult.innerHTML = '';
                }
            }
            
            // æŠ½ç‰Œ
            function drawCards() {
                console.log("å¼€å§‹æŠ½ç‰Œï¼Œæ¨¡å¼:", currentDrawType);
                
                // é‡ç½®ä¹‹å‰çš„ç»“æœ
                drawingResult.classList.remove('active');
                drawingResult.innerHTML = '';
                
                // æ ¹æ®æŠ½ç‰Œç±»å‹æ‰§è¡Œä¸åŒçš„æŠ½ç‰Œé€»è¾‘
                if (currentDrawType === 'soul') {
                    drawSoulCard();
                } else if (currentDrawType === 'hexagram') {
                    drawHexagramSpread();
                } else if (currentDrawType === 'three-card') {
                    drawThreeCardSpread();
                } else if (currentDrawType === 'arcana') {
                    drawArcanaSpread();
                }
                
                // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                setTimeout(() => {
                    drawingResult.classList.add('active');
                }, 100);
            }
            
            // æŠ½å–ç‰Œçµ - åªä»å¤§é˜¿å¡é‚£ä¸­æŠ½å–ï¼Œä¸”åªæŠ½æ­£ä½
            function drawSoulCard() {
                // åªä»å¤§é˜¿å¡é‚£ä¸­æŠ½å–ï¼ˆtypeä¸º"major"çš„ç‰Œï¼‰
                const majorArcanaCards = tarotCards.filter(card => card.type === "major");
                
                // éšæœºé€‰æ‹©ä¸€å¼ ç‰Œ
                const randomIndex = Math.floor(Math.random() * majorArcanaCards.length);
                const card = majorArcanaCards[randomIndex];
                
                // è·å–å¡ç‰‡åœ¨åŸå§‹æ•°ç»„ä¸­çš„ç´¢å¼•
                const originalIndex = tarotCards.findIndex(c => c.number === card.number && c.name === card.name);
                
                // ç‰ŒçµåªæŠ½æ­£ä½
                const position = 'upright';
                const positionText = 'æ­£ä½';
                const description = card.upright;
                
                console.log("æŠ½å–åˆ°ç‰Œçµ:", card.name, "ä½ç½®:", positionText, "åŸå§‹ç´¢å¼•:", originalIndex);
                
                // è®°å½•æŠ½åˆ°çš„ç‰Œ
                drawnCards = [{...card, position, positionText, description}];
                
                // æ¸²æŸ“ç»“æœ - ä½¿ç”¨ç¿»ç‰ŒåŠ¨ç”»
                drawingResult.innerHTML = `
                    <h2 class="result-title"><i class="fas fa-star"></i> ä½ çš„ç‰Œçµ</h2>
                    <div class="soul-card-result">
                        <div class="flip-card" data-index="${originalIndex}" data-position="${position}">
                            <div class="flip-card-inner">
                                <div class="flip-card-front">
                                    <div class="card-back-pattern">ğŸ”®</div>
                                    <p>ä½ çš„ç‰Œçµæ­£åœ¨æ˜¾ç°</p>
                                </div>
                                <div class="flip-card-back">
                                    <div class="flip-card-emoji">${card.emoji}</div>
                                    <h3 class="flip-card-name">${card.name}</h3>
                                    <div class="flip-card-number">${card.number}å·ç‰Œ</div>
                                    <div class="card-position ${position}">${positionText}</div>
                                    <p>è¿™å¼ ç‰Œæ­ç¤ºäº†ä½ çš„æœ¬è´¨å’Œçµé­‚ç‰¹è´¨</p>
                                </div>
                            </div>
                        </div>
                        <p class="soul-card-description">${description}</p>
                        <button class="reset-btn">
                            <i class="fas fa-redo"></i> é‡æ–°æŠ½å–
                        </button>
                    </div>
                `;
            }
            
            // æŠ½å–å…­èŠ’æ˜Ÿç‰Œé˜µ
            function drawHexagramSpread() {
                console.log("æŠ½å–å…­èŠ’æ˜Ÿç‰Œé˜µ");
                
                // éšæœºé€‰æ‹©6å¼ ä¸åŒçš„ç‰Œï¼ˆå¯ä»¥åŒ…å«å¤§å°é˜¿å¡é‚£ï¼‰
                hexagramCards = [];
                const usedIndices = new Set();
                
                while (hexagramCards.length < 6) {
                    const randomIndex = Math.floor(Math.random() * tarotCards.length);
                    if (!usedIndices.has(randomIndex)) {
                        usedIndices.add(randomIndex);
                        
                        // éšæœºå†³å®šæ­£ä½æˆ–é€†ä½
                        const isReversed = Math.random() > 0.5;
                        const position = isReversed ? 'reversed' : 'upright';
                        const positionText = isReversed ? 'é€†ä½' : 'æ­£ä½';
                        
                        hexagramCards.push({
                            ...tarotCards[randomIndex],
                            position,
                            positionText,
                            description: isReversed ? tarotCards[randomIndex].reversed : tarotCards[randomIndex].upright,
                            positionIndex: hexagramCards.length + 1
                        });
                    }
                }
                
                console.log("æŠ½å–åˆ°çš„ç‰Œ:", hexagramCards.map(c => `${c.name} (${c.positionText})`));
                
                // æ¸²æŸ“å…­èŠ’æ˜Ÿå¸ƒå±€ - ä¸¤æ’ä¸‰åˆ—
                drawingResult.innerHTML = `
                    <h2 class="result-title"><i class="fas fa-star-of-david"></i> å…­èŠ’æ˜Ÿç‰Œé˜µ</h2>
                    <div class="hexagram-layout">
                        ${hexagramCards.map((card, idx) => {
                            const cardIndex = Array.from(usedIndices)[idx];
                            return `
                                <div class="hexagram-position" data-index="${cardIndex}" data-position="${card.position}">
                                    <div class="spread-flip-card">
                                        <div class="spread-flip-card-inner">
                                            <div class="spread-flip-front">
                                                <div class="question-mark">?</div>
                                                <div class="position-text">${hexagramPositions[idx].label}</div>
                                            </div>
                                            <div class="spread-flip-back">
                                                <div class="result-card">
                                                    <div class="card-number">${card.number}</div>
                                                    <div class="card-emoji">${card.emoji}</div>
                                                    <div class="card-name">${card.name}</div>
                                                    <div class="card-position ${card.position}">${card.positionText}</div>
                                                    <div class="position-label">${hexagramPositions[idx].label}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 50px;">
                        <p style="color: #b59a5a; max-width: 800px; margin: 0 auto 20px; line-height: 1.6;">
                            å…­èŠ’æ˜Ÿç‰Œé˜µæ˜¯ä¸€ç§ç»å…¸çš„å¡”ç½—ç‰Œé˜µï¼Œæ¯å¼ ç‰Œä»£è¡¨ä¸åŒçš„æ–¹é¢ã€‚ç‚¹å‡»ä»»ä½•ä¸€å¼ ç‰Œå¯ä»¥æŸ¥çœ‹å…¶è¯¦ç»†å«ä¹‰ã€‚
                        </p>
                        <button class="reset-btn">
                            <i class="fas fa-redo"></i> é‡æ–°æŠ½å–
                        </button>
                    </div>
                `;
            }
            
            // æŠ½å–ä¸‰ç‰Œé˜µ
            function drawThreeCardSpread() {
                console.log("æŠ½å–ä¸‰ç‰Œé˜µ");
                
                // éšæœºé€‰æ‹©3å¼ ä¸åŒçš„ç‰Œï¼ˆå¯ä»¥åŒ…å«å¤§å°é˜¿å¡é‚£ï¼‰
                threeCardSpread = [];
                const usedIndices = new Set();
                
                while (threeCardSpread.length < 3) {
                    const randomIndex = Math.floor(Math.random() * tarotCards.length);
                    if (!usedIndices.has(randomIndex)) {
                        usedIndices.add(randomIndex);
                        
                        // éšæœºå†³å®šæ­£ä½æˆ–é€†ä½
                        const isReversed = Math.random() > 0.5;
                        const position = isReversed ? 'reversed' : 'upright';
                        const positionText = isReversed ? 'é€†ä½' : 'æ­£ä½';
                        
                        threeCardSpread.push({
                            ...tarotCards[randomIndex],
                            position,
                            positionText,
                            description: isReversed ? tarotCards[randomIndex].reversed : tarotCards[randomIndex].upright,
                            positionIndex: threeCardSpread.length + 1
                        });
                    }
                }
                
                console.log("æŠ½å–åˆ°çš„ç‰Œ:", threeCardSpread.map(c => `${c.name} (${c.positionText})`));
                
                // æ¸²æŸ“ä¸‰ç‰Œé˜µå¸ƒå±€
                drawingResult.innerHTML = `
                    <h2 class="result-title"><i class="fas fa-stream"></i> ä¸‰ç‰Œé˜µ - è¿‡å»ã€ç°åœ¨ã€æœªæ¥</h2>
                    <div class="three-card-layout">
                        ${threeCardSpread.map((card, idx) => {
                            const cardIndex = Array.from(usedIndices)[idx];
                            return `
                                <div class="three-card-position" data-index="${cardIndex}" data-position="${card.position}">
                                    <div class="spread-flip-card">
                                        <div class="spread-flip-card-inner">
                                            <div class="spread-flip-front">
                                                <div class="question-mark">?</div>
                                                <div class="position-text">${threeCardPositions[idx].label}</div>
                                            </div>
                                            <div class="spread-flip-back">
                                                <div class="result-card">
                                                    <div class="card-number">${card.number}</div>
                                                    <div class="card-emoji">${card.emoji}</div>
                                                    <div class="card-name">${card.name}</div>
                                                    <div class="card-position ${card.position}">${card.positionText}</div>
                                                    <div class="three-card-label">${threeCardPositions[idx].label}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 50px;">
                        <p style="color: #b59a5a; max-width: 800px; margin: 0 auto 20px; line-height: 1.6;">
                            ä¸‰ç‰Œé˜µæ˜¯ä¸€ç§ç®€æ´è€Œå¼ºå¤§çš„å¡”ç½—ç‰Œé˜µï¼Œä»£è¡¨è¿‡å»ã€ç°åœ¨å’Œæœªæ¥çš„èƒ½é‡æµåŠ¨ã€‚ç‚¹å‡»ä»»ä½•ä¸€å¼ ç‰Œå¯ä»¥æŸ¥çœ‹å…¶è¯¦ç»†å«ä¹‰ã€‚
                        </p>
                        <button class="reset-btn">
                            <i class="fas fa-redo"></i> é‡æ–°æŠ½å–
                        </button>
                    </div>
                `;
            }
            
            // æŠ½å–é˜¿å¡é‚£ç‰Œé˜µ
            function drawArcanaSpread() {
                console.log("æŠ½å–é˜¿å¡é‚£ç‰Œé˜µ");
                
                // éšæœºé€‰æ‹©4å¼ ä¸åŒçš„ç‰Œï¼ˆå¯ä»¥åŒ…å«å¤§å°é˜¿å¡é‚£ï¼‰
                arcanaSpread = [];
                const usedIndices = new Set();
                
                while (arcanaSpread.length < 4) {
                    const randomIndex = Math.floor(Math.random() * tarotCards.length);
                    if (!usedIndices.has(randomIndex)) {
                        usedIndices.add(randomIndex);
                        
                        // éšæœºå†³å®šæ­£ä½æˆ–é€†ä½
                        const isReversed = Math.random() > 0.5;
                        const position = isReversed ? 'reversed' : 'upright';
                        const positionText = isReversed ? 'é€†ä½' : 'æ­£ä½';
                        
                        arcanaSpread.push({
                            ...tarotCards[randomIndex],
                            position,
                            positionText,
                            description: isReversed ? tarotCards[randomIndex].reversed : tarotCards[randomIndex].upright,
                            positionIndex: arcanaSpread.length + 1
                        });
                    }
                }
                
                console.log("æŠ½å–åˆ°çš„ç‰Œ:", arcanaSpread.map(c => `${c.name} (${c.positionText})`));
                
                // æ¸²æŸ“é˜¿å¡é‚£ç‰Œé˜µå¸ƒå±€
                drawingResult.innerHTML = `
                    <h2 class="result-title"><i class="fas fa-layer-group"></i> é˜¿å¡é‚£ç‰Œé˜µ - å››å…ƒç´ </h2>
                    <div class="arcana-layout">
                        ${arcanaSpread.map((card, idx) => {
                            const cardIndex = Array.from(usedIndices)[idx];
                            return `
                                <div class="arcana-position" data-index="${cardIndex}" data-position="${card.position}">
                                    <div class="spread-flip-card">
                                        <div class="spread-flip-card-inner">
                                            <div class="spread-flip-front">
                                                <div class="question-mark">?</div>
                                                <div class="position-text">${arcanaPositions[idx].label}</div>
                                            </div>
                                            <div class="spread-flip-back">
                                                <div class="result-card">
                                                    <div class="card-number">${card.number}</div>
                                                    <div class="card-emoji">${card.emoji}</div>
                                                    <div class="card-name">${card.name}</div>
                                                    <div class="card-position ${card.position}">${card.positionText}</div>
                                                    <div class="arcana-label">${arcanaPositions[idx].label}</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 50px;">
                        <p style="color: #b59a5a; max-width: 800px; margin: 0 auto 20px; line-height: 1.6;">
                            é˜¿å¡é‚£ç‰Œé˜µä»£è¡¨å¡”ç½—ç‰Œçš„å››å…ƒç´ ï¼šæƒæ–ï¼ˆç«ï¼‰ã€åœ£æ¯ï¼ˆæ°´ï¼‰ã€å®å‰‘ï¼ˆé£ï¼‰ã€æ˜Ÿå¸ï¼ˆåœŸï¼‰ã€‚ç‚¹å‡»ä»»ä½•ä¸€å¼ ç‰Œå¯ä»¥æŸ¥çœ‹å…¶è¯¦ç»†å«ä¹‰ã€‚
                        </p>
                        <button class="reset-btn">
                            <i class="fas fa-redo"></i> é‡æ–°æŠ½å–
                        </button>
                    </div>
                `;
            }
            
            // æ˜¾ç¤ºå¡ç‰‡è¯¦æƒ…æ¨¡æ€æ¡†
            function showCardModal(index, position = 'upright') {
                const card = tarotCards[index];
                const isReversed = position === 'reversed';
                const positionText = isReversed ? 'é€†ä½' : 'æ­£ä½';
                const description = isReversed ? card.reversed : card.upright;
                
                console.log("æ˜¾ç¤ºå¡ç‰‡è¯¦æƒ…:", card.name, "ä½ç½®:", positionText);
                
                document.getElementById('modal-emoji').textContent = card.emoji;
                document.getElementById('modal-name').textContent = card.name;
                document.getElementById('modal-number').textContent = `${card.number}å·ç‰Œ`;
                document.getElementById('modal-position').textContent = positionText;
                document.getElementById('modal-position').className = `modal-position ${position}`;
                document.getElementById('modal-description').textContent = description;
                
                // åˆå§‹åŒ–æ¨¡æ€æ¡†ç²’å­èƒŒæ™¯
                initModalParticles();
                
                cardModal.classList.add('active');
            }
            
            // é‡ç½®æŠ½ç‰Œç»“æœ
            function resetDrawing() {
                console.log("é‡ç½®æŠ½ç‰Œç»“æœ");
                drawingResult.classList.remove('active');
                drawingResult.innerHTML = '';
                drawnCards = [];
                hexagramCards = [];
                threeCardSpread = [];
                arcanaSpread = [];
            }
            
            // åˆå§‹åŒ–åº”ç”¨
            init();
        });
    </script>
</body>
</html>